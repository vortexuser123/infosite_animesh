<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ebook</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .tilt:hover {
      transform: perspective(1000px) rotateY(8deg) rotateX(4deg) scale(1.05);
      transition: transform 0.4s ease;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-gray-900 to-black text-white min-h-screen p-6">

  <!-- Header -->
  <header class="text-center mb-8">
    <h1 class="text-5xl font-extrabold text-indigo-400 drop-shadow-lg">My Ebooks</h1>
    <!-- <p class="text-gray-300 text-lg">Preview, Download, Rate & Track Stats</p> -->
  </header>

  <!-- Controls -->
  <div class="flex flex-col sm:flex-row items-center justify-between mb-6 gap-4">
    <input 
      id="searchInput" 
      type="text" 
      placeholder="🔍 Search ebooks..." 
      class="w-full sm:w-1/4 p-3 rounded-xl bg-gray-800 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500"
    >
    <button 
      id="addEbookBtn" 
      class="px-5 py-3 bg-indigo-600 rounded-xl font-bold hover:bg-indigo-700 transition transform hover:scale-105">
      ➕ Add Ebook
    </button>
  </div>

  <!-- Stats -->
  <div id="stats" class="flex flex-wrap gap-4 justify-center mb-8">
    <div class="bg-gray-800 px-6 py-4 rounded-xl shadow-md">
      <span class="text-2xl font-bold" id="totalBooks">0</span><br>
      <span class="text-gray-400">Total Ebooks</span>
    </div>
    <div class="bg-gray-800 px-6 py-4 rounded-xl shadow-md">
      <span class="text-2xl font-bold" id="avgRating">0.0</span><br>
      <span class="text-gray-400">Your Rating</span>
    </div>
    <div class="bg-gray-800 px-6 py-4 rounded-xl shadow-md">
      <span class="text-2xl font-bold" id="downloadCount">0</span><br>
      <span class="text-gray-400">Your Downloads</span>
    </div>
  </div>

  <!-- Ebook Grid -->
  <div id="ebookGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
    <!-- Example Ebook -->
    <div class="ebook-card relative bg-gray-800 rounded-2xl shadow-lg overflow-hidden tilt cursor-pointer group" data-rating="0">
      <img src="cover/Python.jpg" alt="Ebook Cover" class="w-full h-full object-cover">
      

      <!-- Details -->
      <div class="absolute bottom-0 left-0 right-0 bg-black/80 text-gray-200 p-4 max-h-0 overflow-hidden transition-all duration-500 group-hover:max-h-72">
        <div class="p-4">
        <h2 class="text-xl font-bold group-hover:text-indigo-400 transition">Python Handbook</h2>
        <p class="text-sm text-gray-400">By Animesh</p>
        <span class="bg-indigo-600 text-xs px-2 py-1 rounded">Edition 1</span>
        </div>
        <p class="text-sm mb-2">Learn Python language from the basics and move towards the advanced. It is a beginner friendly ebook, Which covers all the essential topics.</p>

        <!-- Buttons -->
        <div class="flex gap-2">
          <a href="#" onclick="incrementDownload()" class="inline-block bg-green-600 px-3 py-1 rounded-lg text-sm font-semibold hover:bg-green-700 transition">Download</a>
          <button onclick="openPreview('book/Python_handbook.pdf')" class="inline-block bg-blue-600 px-3 py-1 rounded-lg text-sm font-semibold hover:bg-blue-700 transition">Preview</button>
        </div>
        
        <!-- Rating -->
        <div class="flex items-center mt-2 space-x-1 rating">
          <span class="star text-gray-400 cursor-pointer text-xl">★</span>
          <span class="star text-gray-400 cursor-pointer text-xl">★</span>
          <span class="star text-gray-400 cursor-pointer text-xl">★</span>
          <span class="star text-gray-400 cursor-pointer text-xl">★</span>
          <span class="star text-gray-400 cursor-pointer text-xl">★</span>
        </div>
      </div>
    </div>

    <div class="ebook-card relative bg-gray-800 rounded-2xl shadow-lg overflow-hidden tilt cursor-pointer group" data-rating="0">
      <img src="cover/The_endless_road.png" alt="Ebook Cover" class="w-full h-full object-cover">
      
      <!-- Details -->
      <div class="absolute bottom-0 left-0 right-0 bg-black/80 text-gray-200 p-4 max-h-0 overflow-hidden transition-all duration-500 group-hover:max-h-72">
        <div class="p-4">
        <h2 class="text-xl font-bold group-hover:text-indigo-400 transition">The Endless Road</h2>
        <p class="text-sm text-gray-400">By Animesh</p>
        <span class="bg-indigo-600 text-xs px-2 py-1 rounded">Series 1</span>
        </div>
        <p class="text-sm mb-2">A story of three teenagers, lost in an abandon dark forest. They are trying to escape but the horrifying things in that jungle, Stops them to do that.</p>

        <!-- Buttons -->
        <div class="flex gap-2">
          <a href="#" onclick="incrementDownload()" class="inline-block bg-green-600 px-3 py-1 rounded-lg text-sm font-semibold hover:bg-green-700 transition">Download</a>
          <button onclick="openPreview('book/Theendlessroad.pdf')" class="inline-block bg-blue-600 px-3 py-1 rounded-lg text-sm font-semibold hover:bg-blue-700 transition">Preview</button>
        </div>
        
        <!-- Rating -->
        <div class="flex items-center mt-2 space-x-1 rating">
          <span class="star text-gray-400 cursor-pointer text-xl">★</span>
          <span class="star text-gray-400 cursor-pointer text-xl">★</span>
          <span class="star text-gray-400 cursor-pointer text-xl">★</span>
          <span class="star text-gray-400 cursor-pointer text-xl">★</span>
          <span class="star text-gray-400 cursor-pointer text-xl">★</span>
        </div>
      </div>
    </div>
    
    <div class="ebook-card relative bg-gray-800 rounded-2xl shadow-lg overflow-hidden tilt cursor-pointer group" data-rating="0">
      <img src="cover/The_whispering_banyan.jpg" alt="Ebook Cover" class="w-full h-full object-cover">
      
      <!-- Details -->
      <div class="absolute bottom-0 left-0 right-0 bg-black/80 text-gray-200 p-4 max-h-0 overflow-hidden transition-all duration-500 group-hover:max-h-72">
        <div class="p-4">
        <h2 class="text-xl font-bold group-hover:text-indigo-400 transition">The Whispering Banyan</h2>
        <p class="text-sm text-gray-400">By Animesh</p>
        <span class="bg-indigo-600 text-xs px-2 py-1 rounded">Short Story</span>
        </div>
        <p class="text-sm mb-2">A banyan tree of full mystery. It also whispers at midnight.</p>

        <!-- Buttons -->
        <div class="flex gap-2">
          <a href="#" onclick="incrementDownload()" class="inline-block bg-green-600 px-3 py-1 rounded-lg text-sm font-semibold hover:bg-green-700 transition">Download</a>
          <button onclick="openPreview('book/Thewhisperingbanyan.pdf')" class="inline-block bg-blue-600 px-3 py-1 rounded-lg text-sm font-semibold hover:bg-blue-700 transition">Preview</button>
        </div>
        
        <!-- Rating -->
        <div class="flex items-center mt-2 space-x-1 rating">
          <span class="star text-gray-400 cursor-pointer text-xl">★</span>
          <span class="star text-gray-400 cursor-pointer text-xl">★</span>
          <span class="star text-gray-400 cursor-pointer text-xl">★</span>
          <span class="star text-gray-400 cursor-pointer text-xl">★</span>
          <span class="star text-gray-400 cursor-pointer text-xl">★</span>
        </div>
      </div>
    </div>
    
  </div>

  <!-- Preview Modal -->
  <div id="previewModal" class="hidden fixed inset-0 bg-black/70 flex items-center justify-center z-50">
    <div class="bg-gray-900 p-4 rounded-2xl w-full max-w-4xl relative">
      <button onclick="closePreview()" class="absolute top-3 right-3 bg-red-600 w-8 h-8 rounded-full">✕</button>
      <iframe id="pdfFrame" src="" class="w-full h-[80vh] rounded-lg"></iframe>
    </div>
  </div>

  <!-- Add Ebook Modal -->
  <div id="modal" class="hidden fixed inset-0 bg-black/60 flex items-center justify-center z-50">
    <div class="bg-gray-800 p-6 rounded-2xl shadow-2xl w-full max-w-md">
      <h2 class="text-2xl font-bold mb-4">➕ Add New Ebook</h2>
      <form id="ebookForm" class="space-y-4">
        <input type="text" id="title" placeholder="Ebook Title" class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600" required>
        <input type="text" id="author" placeholder="Author" class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600" required>
        <input type="url" id="cover" placeholder="Cover Image URL" class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600" required>
        <textarea id="desc" placeholder="Description..." class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600"></textarea>
        <input type="url" id="download" placeholder="Download Link (PDF)" class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600" required>
        <input type="url" id="preview" placeholder="Preview Link (PDF)" class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600" required>
        <input type="text" id="tag" placeholder="Category/Tag" class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600">
        <div class="flex justify-between mt-4">
          <button type="submit" class="bg-indigo-600 px-5 py-2 rounded-lg hover:bg-indigo-700">Save</button>
          <button type="button" id="closeModal" class="bg-red-600 px-5 py-2 rounded-lg hover:bg-red-700">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Elements
    const modal = document.getElementById('modal');
    const addBtn = document.getElementById('addEbookBtn');
    const closeBtn = document.getElementById('closeModal');
    const form = document.getElementById('ebookForm');
    const grid = document.getElementById('ebookGrid');
    const searchInput = document.getElementById('searchInput');
    const stats = {
      totalBooks: document.getElementById('totalBooks'),
      avgRating: document.getElementById('avgRating'),
      downloads: document.getElementById('downloadCount')
    };
    let totalDownloads = 0;

    // Modal Logic
    addBtn.onclick = () => modal.classList.remove('hidden');
    closeBtn.onclick = () => modal.classList.add('hidden');

    // Add Ebook
    form.onsubmit = (e) => {
      e.preventDefault();
      const title = document.getElementById('title').value;
      const author = document.getElementById('author').value;
      const cover = document.getElementById('cover').value;
      const desc = document.getElementById('desc').value;
      const download = document.getElementById('download').value;
      const preview = document.getElementById('preview').value;
      const tag = document.getElementById('tag').value;

      const card = document.createElement('div');
      card.className = "ebook-card relative bg-gray-800 rounded-2xl shadow-lg overflow-hidden tilt cursor-pointer group";
      card.dataset.rating = "0";
      card.innerHTML = `
        <img src="${cover}" alt="${title}" class="w-full h-64 object-cover">
        <div class="p-4">
          <h2 class="text-xl font-bold group-hover:text-indigo-400 transition">${title}</h2>
          <p class="text-sm text-gray-400">By ${author}</p>
          <span class="bg-indigo-600 text-xs px-2 py-1 rounded">${tag}</span>
        </div>
        <div class="absolute bottom-0 left-0 right-0 bg-black/80 text-gray-200 p-4 max-h-0 overflow-hidden transition-all duration-500 group-hover:max-h-64">
          <p class="text-sm mb-2">${desc}</p>
          <div class="flex gap-2">
            <a href="${download}" target="_blank" onclick="incrementDownload()" class="inline-block bg-green-600 px-3 py-1 rounded-lg text-sm font-semibold hover:bg-green-700 transition">⬇ Download</a>
            <button onclick="openPreview('${preview}')" class="inline-block bg-blue-600 px-3 py-1 rounded-lg text-sm font-semibold hover:bg-blue-700 transition">👁 Preview</button>
          </div>
          <div class="flex items-center mt-2 space-x-1 rating">
            <span class="star text-gray-400 cursor-pointer text-xl">★</span>
            <span class="star text-gray-400 cursor-pointer text-xl">★</span>
            <span class="star text-gray-400 cursor-pointer text-xl">★</span>
            <span class="star text-gray-400 cursor-pointer text-xl">★</span>
            <span class="star text-gray-400 cursor-pointer text-xl">★</span>
          </div>
        </div>
      `;
      grid.appendChild(card);
      attachRating(card);
      updateStats();
      modal.classList.add('hidden');
      form.reset();
    };

    // Search Filter
    searchInput.addEventListener('input', () => {
      const query = searchInput.value.toLowerCase();
      const cards = grid.getElementsByClassName('ebook-card');
      for (let card of cards) {
        const title = card.querySelector('h2').innerText.toLowerCase();
        card.style.display = title.includes(query) ? '' : 'none';
      }
    });

    // Stats Update
    function updateStats() {
      const cards = grid.querySelectorAll('.ebook-card');
      stats.totalBooks.textContent = cards.length;

      let totalRating = 0;
      cards.forEach(c => totalRating += parseInt(c.dataset.rating || 0));
      stats.avgRating.textContent = cards.length ? (totalRating / cards.length).toFixed(1) : "0.0";

      stats.downloads.textContent = totalDownloads;
    }

    function incrementDownload() {
      totalDownloads++;
      updateStats();
    }

    // Preview Modal
    function openPreview(pdf) {
      document.getElementById("pdfFrame").src = pdf;
      document.getElementById("previewModal").classList.remove("hidden");
    }
    function closePreview() {
      document.getElementById("previewModal").classList.add("hidden");
      document.getElementById("pdfFrame").src = "";
    }

    // Star Rating
    function attachRating(card) {
      const stars = card.querySelectorAll('.star');
      stars.forEach((star, index) => {
        star.addEventListener('click', () => {
          stars.forEach((s, i) => {
            s.classList.toggle('text-yellow-400', i <= index);
            s.classList.toggle('text-gray-400', i > index);
          });
          card.dataset.rating = index + 1;
          updateStats();
        });
      });
    }

    // Attach rating to initial ebook
    document.querySelectorAll('.ebook-card').forEach(attachRating);
    updateStats();
  </script>

</body>
</html>
